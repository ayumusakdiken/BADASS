FROM debian:trixie

RUN apt-get update && \
    apt-get install -y curl net-tools iputils-ping vim gnupg2 procps && \
    rm -rf /var/lib/apt/lists/*

RUN curl -s https://deb.frrouting.org/frr/keys.gpg | tee /usr/share/keyrings/frrouting.gpg > /dev/null

ENV FRRVER=frr-stable
RUN echo "deb [signed-by=/usr/share/keyrings/frrouting.gpg] https://deb.frrouting.org/frr trixie $FRRVER" \
    > /etc/apt/sources.list.d/frr.list

RUN apt-get update && \
    apt-get install -y frr frr-pythontools && \
    rm -rf /var/lib/apt/lists/*

COPY ./daemons /etc/frr/

ENV PATH=$PATH:/usr/lib/frr

CMD ["/usr/lib/frr/frr", "start"]
